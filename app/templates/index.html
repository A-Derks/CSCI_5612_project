{% extends "base.html" %}
{% block content %}
<section class="hero">
  <h1>{{ me.name }}</h1>
  <p>{{ me.tagline }}</p>
  <div class="cta">
  </div>
</section>

<script>
document.getElementById('gh-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  const user = document.getElementById('gh-user').value.trim();
  const out = document.getElementById('gh-results');
  out.textContent = 'Loading...';
  try {
    const r = await fetch(`/api/github_repos?user=${encodeURIComponent(user)}&limit=5`);
    if(!r.ok) throw new Error('Request failed');
    const data = await r.json();
    if (!data.repos || !data.repos.length) { out.textContent = 'No repos found.'; return; }
    out.innerHTML = data.repos.map(r =>
      `<div class="repo"><a href="${r.url}" target="_blank" rel="noreferrer">${r.name}</a> ‚≠ê ${r.stars || 0} <small>${r.updated_at}</small></div>`
    ).join('');
  } catch (err) {
    out.textContent = 'Error: ' + err.message;
  }
});
</script>
{% endblock %}
